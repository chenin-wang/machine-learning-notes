# 罗德里格斯公式

* [返回上层目录](../navigation.md)
* 

罗德里格斯公式（Rodrigues‘s Formula）是数学中一种广泛应用于旋转向量计算和旋转矩阵表示的几何变换方法。

罗德里格斯公式是由19世纪的数学家罗德里格斯（Rodrigues）提出的，它为旋转向量的计算和旋转矩阵的表示提供了一种简洁高效的方式。通过该公式，我们可以方便地描述和应用旋转操作，实现在三维空间中的几何变换。

# 旋转向量

## 欧拉旋转定理

在运动学里，欧拉旋转定理(Euler's rotation theorem)表明，在三维空间里，假设一个刚体在做一个旋转的时候，刚体内部至少有一点固定不动，则此位移等价于一个绕着包含那固定点的固定轴的旋转。

这定理是以瑞士数学家莱昂哈德·欧拉命名。于1775年，欧拉使用简单的几何论述证明了这定理。

采用矩阵来证明：

空间旋转是与3x3旋转矩阵$R$一一对应的线性映射，将坐标向量$x$变换为$X$，即$Rx=X$。因此，欧拉旋转定理的另一个版本是，对于每次旋转$R$，都有一个非零向量$n$，满足$Rn=n$，这正是所说的$n$是$R$矩阵的特征值为1的特征向量。因此，只需要证明1是$R$矩阵的特征值即可。$R$矩阵表示的旋转的旋转轴将是$\mu n$向量表示的直线，其中$n$就是特征值为1的特征向量。

旋转矩阵有一个基本特性就是其逆矩阵等于其转置矩阵，即
$$
R^TR=R^TR=I
$$
其中，$I$是3x3的单位阵。

计算上式的行列式，会发现旋转矩阵的行列式的值为$\pm 1$：
$$
\begin{aligned}
&1=\det(I)=\det(R^TR)=\det(R^T)\det(R)=\det(R)\det(R)=\det(R)^2\\
\Rightarrow&\det(R)=\pm 1
\end{aligned}
$$
行列式为1的旋转矩阵被称为正确旋转。行列式为-1的旋转矩阵被称为不正确旋转，是反射和正确旋转的结合。

现在将证明，正确的旋转矩阵$R$（即$\det(R)=1$）具有至少一个不变向量$n$，即$Rn=n$，因为这要求$(R-I)n=0$，所以向量$n$必须是矩阵$R$的特征向量，其特征值为$\lambda=1$。因此，这相当于证明$\det(R-I)=0$。这是因为$Ax=0$，当$x$不是全零向量时，$A$矩阵必然是线性相关的，所以$\det(A)=0$。

**下面证明$\det(R-I)=0$，证明后就能说明$R$存在特征值为1的特征向量$n$了，也即说明$\mu n$是旋转轴了，这就证明了欧拉旋转定理**。

利用如下两个等式

（1）对于3x3矩阵$A$有：
$$
\det(-A)=(-1)^3\det(A)--\det(A)
$$
（2）由于$\det(R)=1$，可得
$$
\det(R^{-1})=\det(R^T)=\det(R)=1
$$
来计算
$$
\begin{aligned}
&\det(R-I)\\
=&det((R-I)^T)\\
=&\det(R^T-I)\\
=&\det(R^{-1}-R^{-1}R)\\
=&\det(R^{-1}(I-R))\\
=&\det(R^{-1})\det(-(R-I))\\
=&1\cdot(-1)^3\det(R-I)\\
=&-\det(R-I)
\end{aligned}
$$
可得
$$
\det(R-I)=0
$$
这表明$\lambda=1$是特征方程的解，因为$\det(R-\lambda I)=0$意味着$\lambda$为矩阵$R$的特征值。

所以当$\det(R-I)=0$时，$\lambda=1$是矩阵$R$的特征值。

换句话说，矩阵$R-I$是奇异的并且有非零解（即$(R_I)x=0$的解存在非零的$x$），即至少有一个非零向量$n$，对于$n$有
$$
(R-I)n=0
$$
即
$$
Rn=n
$$
对于实数$\mu$的直线$\mu n$在$R$下是不变的，即$\mu n$是旋转轴。这就证明了欧拉旋转定理。













实际上，任意旋转都可以用一个旋转轴和一个旋转角来刻画。我们可以使用一个向量u uu，其方向与旋转轴一致，其长度等于旋转角θ \thetaθ，那么向量θ u \theta uθu就可以描述这个旋转，这种向量称为旋转向量(或轴角/角轴，Axis-Angle)，只需一个三维向量即可描述旋转。同样，对于一个变换矩阵，使用一个旋转向量和一个平移向量即可表达一次变换，此时变量维数正好是六维。






罗德里格斯公式是计算机视觉中的一大经典公式，在描述相机位姿的过程中很常用。公式：
$$
R=I+\sin\theta K+(1-\cos\theta)K^2
$$
在三维空间中，旋转矩阵$R$可以对坐标系（基向量组）进行刚性的旋转变换。
$$
R=
\begin{bmatrix}
r_{xx}&r_{xy}&r_{xz}\\
r_{yx}&r_{yy}&r_{yz}\\
r_{zx}&r_{zy}&r_{zz}
\end{bmatrix}
$$
通常为了方便计算，基向量组中的向量是相互正交的且都为单位向量，那么$R$就是一个标准三阶正交矩阵。

由于$R$矩阵每两列都正交，所以有三个约束，由于$R$矩阵每列的模都是1，所以有三个约束。而$R$矩阵一共有9个参数，减去这6个约束，就剩3个自由度了。

所以，**$R$矩阵的自由度为3，说明最少可以用三个变量来表示旋转矩阵$R$，这就是罗德里格斯公式存在的基础**。

罗德里格斯公式首先要确定一个三维的单位向量$k=[k_x,k_y,k_z]^T$（两个自由度）和一个标量$\theta$。